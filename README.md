在学习用koa框架搭建一个微信公众号，脑中有3个不同的大致方式，1个是慕课网老师的架构，koa1运用generator中间件，坑太多，已经完全不适合koa2的写法，1个是网上找的一个koa2开发微信回复一个简单的内容小脚手架，里面的东西只能作为借鉴，因为这个只适合一个简单的回复，要是项目大了，要重新设计，但是思想很不错，1个是自己之前用koa2搭的一个脚手架，功能齐全，但是和微信公众号项目有很大的区别，需要重新设计。此时3个不同的方法在脑海中不同浮现，突然感觉迷茫，感到自己还是搞个简单的东西还不能动手去做，还在犹豫要选什么中间件，路由什么的。这个时候应该要忘记3个方法，跟着自己的感觉来就行了。


axios还不行


###wechat接口封装及回复


通过轻量级koa2框架，运用mvc的思想，中间件，路由，promse，async，await，es6，log4日志等技术对与微信后台的接口的对接，同时创建接口暴露给前端调用。借鉴了scott老师的重要思想，同时自己又进行了优化。

微信后台给咱们后台发送一个get请求(请求地址‘／’)，一个post请求(请求地址‘／’)，get请求是验证签名，签名通过才能发交易。post是xml文件传输，用xml2js模块进行解析转发，所以咱们要给微信后台留这2个路由。

####全局票据access_token


####菜单单独通过前端接口，进行动态创建

####1-3回复文本

####4回复图文

####5上传临时图片并返回

####6上传临时视频素材并返回

####7回复音乐

####8永久图片上传

####9永久视频上传

####10永久图文上传

####11素材列表及素材总数

####12分组列表

####13用户信息

####14关注总数

####15群发(也可以针对分组(需认证服务号))

####16对自己预览消息

####17查看预览状态


![alt 微信二维码](https://raw.githubusercontent.com/fridaydream/blogpic/master/qrcode_wechat.jpg "微信二维码")
